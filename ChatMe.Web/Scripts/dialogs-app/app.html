<div class="row" ng-controller="DialogsListController as listCtrl">
    <div class="col-sm-3">
        <div class="dialogs-list">
            <div ng-repeat="dialog in listCtrl.dialogsService.dialogs"
                ng-click="listCtrl.openDialog(dialog)" class="dialog-preview">
                <div class="row" ng-class="{ 'panel-primary': dialog.selected}">
                    <div>
                        <img src="{{dialog.avatarUrl}}" alt="" class="col-xs-3 img-responsive">
                    </div>
                    <div>
                        <strong><em>{{ dialog.author }}</em></strong>
                    </div>
                    <div>
                        {{ dialog.lastMessageSnippet }}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-offset-1 col-sm-6">
        <div ng-if="!listCtrl.isDialogOpened()" class="dialog-window">
            <div class="vertical-align">
                Select dialog
            </div>
        </div>

        <div ng-if="listCtrl.isDialogOpened()" class="dialog-window">
            <div ng-controller="MessagesListController as msgCtrl" class="messages-list">
                <ol class="discussion">
                    <li ng-repeat="msg in msgCtrl.messagesService.messages | reverse" ng-class="msgCtrl.getMessageClass(msg)">
                        <div class="avatar">
                            <img src="{{msg.avatarUrl}}" />
                        </div>
                        <div class="messages">
                            <p>{{ msg.body }}</p>
                            <time>{{ msgCtrl.prettyTime(msg.time) }}</time>
                        </div>
                    </li>
                    <li id="bottom"></li>
                </ol>
            </div>
            <div ng-controller="NewMessageController as newCtrl" class="new-message-form">
                <div class="form-group">
                    <textarea ng-model="newCtrl.body" rows="5" class="form-control"></textarea>
                </div>
                <div class="form-group">
                    <button ng-click="newCtrl.send()" ng-disabled="!newCtrl.isSendBtnActive" class="btn btn-primary">Send</button>
                </div>
            </div>
        </div>
    </div>
</div>